<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Checkout Seguro - Spotify Pay</title>

<!-- Meta Pixel Code -->
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '4179716432354886');
  fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=4179716432354886&ev=PageView&noscript=1"/>
</noscript>

<!-- Fonte -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#1DB954;       /* Spotify green */
  --brand-dark:#169d45;
  --bg:#0d0d0d;          /* near black */
  --card:#121212;        /* dark card */
  --soft:#1f1f1f;        /* borders / surfaces */
  --text:#e6e6e6;
  --muted:#a1a1a1;
  --danger:#ef4444;
  --accent:#22d3ee;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 600px at 10% -20%, rgba(29,185,84,.12), transparent 60%),
              radial-gradient(1000px 500px at 120% 0%, rgba(29,185,84,.1), transparent 55%),
              var(--bg);
  color:var(--text);
  margin:0; padding:0;
}

/* Header Timer */
.header-timer{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(90deg, var(--brand), #1ed760, var(--brand));
  color:#0a0a0a; text-align:center; font-weight:800; padding:12px 10px; letter-spacing:.3px;
  text-transform:uppercase; font-size:14px;
}

/* Container / Card */
.container{
  max-width:440px; margin:32px auto; background:var(--card); border-radius:16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.06) inset;
  padding:22px;
  border:1px solid var(--soft);
}

.secure{
  display:flex; align-items:center; gap:8px; margin-bottom:8px; font-weight:800; color:var(--brand);
}
.secure::before{content:"üîí"; filter:grayscale(0)}
.country{ text-align:right; font-size:14px; color:var(--muted); margin-top:-22px; margin-bottom:10px;}

.logo{text-align:center;}
.logo .badge{
  width:66px; height:66px; border-radius:16px;
  display:inline-grid; place-items:center;
  background: linear-gradient(180deg, #1ed760, var(--brand));
  color:#0b0b0b; font-weight:900; font-size:26px;
  box-shadow: 0 8px 24px rgba(29,185,84,.35), 0 0 0 2px rgba(255,255,255,.06) inset;
}

.title{text-align:center; font-weight:800; margin-top:12px; font-size:20px; letter-spacing:.2px;}
.price{text-align:center; color:#1ed760; font-size:24px; font-weight:800; margin:10px 0 6px;}
.subprice{text-align:center; color:var(--muted); font-size:12px; margin-bottom:16px}

/* Form */
label{display:block; margin-top:12px; margin-bottom:6px; font-weight:700; color:#d9d9d9;}
input[type="text"], input[type="email"]{
  width:100%; padding:12px 12px; border:1px solid var(--soft);
  background:#0f0f0f; color:var(--text); border-radius:10px; font-size:14px; outline:none;
  transition: border .2s ease, box-shadow .2s ease;
}
input[type="text"]:focus, input[type="email"]:focus{
  border-color:var(--brand); box-shadow:0 0 0 3px rgba(29,185,84,.15);
}

/* Payment methods */
.payment-methods{
  display:flex; gap:10px; margin-top:10px;
}
.payment-methods button{
  flex:1; padding:12px; border:1px solid var(--soft);
  background:#0f0f0f; color:var(--text); cursor:pointer; border-radius:10px; font-weight:800;
  transition: all .18s ease;
}
.payment-methods button:hover{transform:translateY(-1px)}
.payment-methods .active{
  border-color:var(--brand); background:linear-gradient(180deg, rgba(29,185,84,.18), rgba(29,185,84,.08));
  box-shadow:0 0 0 3px rgba(29,185,84,.15) inset;
}

/* Details */
.details{
  margin-top:18px; background:#0f0f0f; border:1px solid var(--soft); padding:14px; border-radius:12px; font-size:14px;
}
.details p{margin:6px 0;}
.details strong{color:#eaeaea}

/* Button */
.buy-btn{
  margin-top:18px; background:var(--brand); color:#0b0b0b; width:100%; padding:13px 14px; font-size:16px;
  border:none; border-radius:999px; cursor:pointer; font-weight:900; letter-spacing:.2px;
  transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 8px 18px rgba(29,185,84,.25);
}
.buy-btn:hover{background:#1ed760; transform:translateY(-1px)}
.buy-btn:active{transform:translateY(0) scale(.99)}

/* Order Bump */
.order-bump{
  display:flex; align-items:flex-start; gap:10px; margin-top:16px;
  background: linear-gradient(180deg, rgba(29,185,84,.16), rgba(29,185,84,.06));
  border:1px dashed rgba(29,185,84,.45); border-radius:12px; padding:12px; cursor:pointer;
  font-size:14px; transition: background .2s ease, border-color .2s ease;
}
.order-bump:hover{background:linear-gradient(180deg, rgba(29,185,84,.22), rgba(29,185,84,.08));}
.order-bump input{margin-top:3px; width:20px; height:20px; accent-color:var(--brand);}
.order-bump .txt .t{font-weight:800; color:#1ed760;}

/* Popup */
#popup{
  display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; backdrop-filter: blur(2px);
}
#popup .modal{
  background:var(--card); padding:22px; border-radius:14px; text-align:center; max-width:320px;
  border:1px solid var(--soft); box-shadow:0 10px 30px rgba(0,0,0,.5);
}
#popup h3{margin:0 0 8px 0}
#popup b{color:#1ed760}
#contador{margin-top:10px; color:var(--muted); font-size:13px;}
</style>
</head>
<body>

<div class="header-timer">Oferta expira em 00:09:56</div>

<div class="container">
  <div class="secure">COMPRA SEGURA</div>
  <div class="country">üá≤üáø</div>

  <div class="https://rocketmedia.site/wp-content/uploads/2025/09/logo-spotify.png">
    <div class="badge"></div>
  </div>

  <div class="title">Spotify Pay</div>
  <div class="price" id="price">197,00 MT</div>
  <div class="subprice">Produto digital ‚Äì entrega via WhatsApp ap√≥s confirma√ß√£o</div>

  <form id="formPagamento">
    <label for="nome">Nome completo</label>
    <input type="text" id="nome" name="nome" placeholder="Seu nome" required  />

    <label for="email">Email</label>
    <input type="email" id="email" name="email" placeholder="seu@email.com" required />

    <label>M√©todo de pagamento</label>
    <div class="payment-methods">
      <button type="button" data-metodo="mpesa" class="active">üì± M-Pesa</button>
      <button type="button" data-metodo="emola">üì≤ e-Mola</button>
    </div>

    <label for="numero">N√∫mero de pagamento</label>
    <input type="text" id="numero" name="telefone" placeholder="8xxxxxxxx" required minlength="9" maxlength="9" />

    <!-- Order Bump -->
    <div class="order-bump" id="orderBump">
      <input type="checkbox" id="bumpCheck">
      <div class="txt"><span class="t">Adicionar Comunidade VIP (+97 MT)</span><br><span style="color:var(--muted)">Acesso a conte√∫dos exclusivos e materiais b√¥nus.</span></div>
    </div>

    <div class="details">
      <p><strong>Detalhes da compra</strong></p>
      <p>Spotify Pay</p>
      <p><strong>Order Bump:</strong> <span id="bumpLabel">N√£o</span></p>
      <p><strong>Total:</strong> <span id="totalFmt">197,00 MT</span></p>
    </div>

    <button type="submit" class="buy-btn">Comprar agora</button>
  </form>
</div>

<div id="popup">
  <div class="modal">
    <h3>üîê Processando pagamento...</h3>
    <p>Enviando pedido via <b><span id="metodoSelecionado"></span></b>.</p>
    <p>Aguarde a confirma√ß√£o ap√≥s digitar o PIN.</p>
    <p id="contador">Fechando em 180s...</p>
  </div>
</div>


<script>
const metodoBtns = document.querySelectorAll(".payment-methods button");
let metodoSelecionado = "mpesa";
let wallet_id = "";
let number_waht = "258824342006";
let push_cut ="https://api.pushcut.io/QsggCCih4K4SGeZy3F37z/notifications/MinhaNotifica%C3%A7%C3%A3o";
let push_cut_1 ="https://api.pushcut.io/FGIMnjsUNYIAlFJ_OGbP8/notifications/MinhaNotifica%C3%A7%C3%A3o"
let acess_token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5ZjkwMzg2Mi1hNzgwLTQ0MGQtOGVkNS1iOGQ4MDkwYjE4MGUiLCJqdGkiOiIxNTdmMTM4NDZiNjUwMDUxYzg3ODQ1NDc5ZjQ4NmQwNGU5MDIxMTBmOWNjNDJlNWNlMmQxOTg3ZjQ0Y2MzOThiM2VmYjYyYmI4OWNiYjk5NSIsImlhdCI6MTc1NDg2MzIzMS41MjQ0NDksIm5iZiI6MTc1NDg2MzIzMS41MjQ0NTEsImV4cCI6MTc4NjM5OTIzMS41MjE1MDMsInN1YiI6IiIsInNjb3BlcyI6W119.sSGP5ncLSw-OOp3hW7YQpFtXcXqnheEIAt1G3Nn8-v-ajgtyV8EE9yrbV_rLlTHvMZfs7p-0VNe8yrWXLwWj8CPgyVFzutX918uEdPHODz-osU8ROYWE5-IMrADwuQ8JA1IHQZKXp9jj41bxVhYqcvMmBrH_Tt2tKKa4JHunYlD_xgjWgNLmHArq31J5iyC8_jNR6LWDTqx7ohWX0LIuQ3mXfl8WKFAmx06YzWHWG4kNFLZZzsd1e-UVP_WqmTQ-ptX_nOA3AelV5xFJGM_i__cghWM3TQUX6Wx4JD3YolHyU3C7G7Z6HtFQ-_Jb2JE4kHZGMmu-85NJgcQS6FbVIkI6ZWSoWI_DsjtdkYMo-Sbz4m-9rYPRXVocsz0rSAMeV-BQkm6Vh-ux7a5j677eumdvz6Osdp08BjpkJ25ZHN6wQru0JCjSCiTasfY7BPYxdWi4JWD4Xec4Ssvi1XzD2M7_pQ_QJ0JGaWyU3jez4IpYyFjw7CZO7aWi-SAFZPNuXZ04V0qXqmpVH-2Q5w7O29-zdkEYwvmJfPcokFGzRJpvseXxfxnOSjHuZxOAJ_J8aBXRyswXfz0ID3xqWjzj53wvVOCjowzMBrfMYJeR4u72ODxO2zey0E3Lux7zdTBCbqLB5J45DmACfWmXY1G9--bIbBq4lSTIcqwrkXbV9pM";

metodoBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    metodoBtns.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    metodoSelecionado = btn.dataset.metodo;
  });
});

const vipCheckbox = document.getElementById("bumpCheck");
const totalFmtEl = document.getElementById("totalFmt");
const bumpLabelEl = document.getElementById("bumpLabel");
const PRICE_BASE = 197;
const PRICE_BUMP = 97;

vipCheckbox.addEventListener("change",()=>{
  const total = PRICE_BASE + (vipCheckbox.checked ? PRICE_BUMP : 0);
  totalFmtEl.textContent = total.toLocaleString('pt-MZ',{style:'currency', currency:'MZN'});
  bumpLabelEl.textContent = vipCheckbox.checked ? "Sim (+97 MT)" : "N√£o";
});

fbq('track','InitiateCheckout');

document.getElementById("formPagamento").addEventListener("submit", async function(e) {
  e.preventDefault();

  const nome = document.getElementById("nome").value;
  const email = document.getElementById("email").value;
  const telefone = document.getElementById("numero").value;
  if (!nome || !email || !telefone || !metodoSelecionado) throw new Error('Dados incompletos');
  if (!/^(84|85|86|87)\d{7}$/.test(telefone)) throw new Error('Numero de telefone invalido');

  const popup = document.getElementById("popup");
  popup.style.display = "flex";

  let tempo = 180;
  const interval = setInterval(() => {
    document.getElementById("contador").innerText = `Fechando em ${tempo--}s...`;
    if (tempo < 0) clearInterval(interval);
  }, 1000);

  wallet_id = metodoSelecionado==='mpesa'?"993607":"993606";

  try {
    const resposta = await fetch(`https://mpesaemolatech.com/v1/c2b/${metodoSelecionado}-payment/${wallet_id}`,{
      method: "POST",
      headers: {
         "Authorization": `Bearer ${acess_token}`,
         "Accept": "application/json",
         "Content-Type": "application/json"
        },
      body: JSON.stringify({
          "client_id": "9f903862-a780-440d-8ed5-b8d8090b180e",
          "amount": PRICE_BASE + (vipCheckbox.checked ? PRICE_BUMP : 0),
          "phone": telefone,
          "reference": "PrimeiroPagamento"
      })
    });
    if(resposta.status===200){
      try{ await fetch(push_cut,{method:'POST',body:JSON.stringify({text:`${nome} pagou ${PRICE_BASE + (vipCheckbox.checked ? PRICE_BUMP : 0)} MZN por ${metodoSelecionado}`,title:'Nova venda aprovada'})}); }catch(err){}
      try{ await fetch(push_cut_1,{method:'POST',body:JSON.stringify({text:`${nome} pagou ${PRICE_BASE + (vipCheckbox.checked ? PRICE_BUMP : 0)} MZN por ${metodoSelecionado}`,title:'Nova venda aprovada'})}); }catch(err){}
      let mensagem = `Comprei o produto Ferramenta Secreta e quero o receber, meu nome √© ${nome}, paguei usando o ${metodoSelecionado} pelo numero: ${telefone}`;
      let link = `https://wa.me/${number_waht}?text=` + encodeURIComponent(mensagem);
      fbq('track', 'Purchase', {
        value: PRICE_BASE + (vipCheckbox.checked ? PRICE_BUMP : 0),
        currency: 'MZN',
        content_name: 'Ferramenta Secreta',
        content_category: metodoSelecionado
      });
      window.location.href = link;
    } else {
      throw new Error("Pagamento n√£o foi processado");
      setTimeout(()=>{window.location.reload()},2000);
    }
  } catch(error){
    throw new Error("Pagamento n√£o foi processado");
    setTimeout(()=>{window.location.reload()},2000);
  }
});
</script>

</body>
</html>
